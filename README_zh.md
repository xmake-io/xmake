<div align="center">
  <a href="https://xmake.io/cn">
    <img width="160" heigth="160" src="https://tboox.org/static/img/xmake/logo256c.png">
  </a>  

  <h1>xmake</h1>

  <div>
    <a href="https://github.com/xmake-io/xmake/actions?query=workflow%3AWindows">
      <img src="https://img.shields.io/github/workflow/status/xmake-io/xmake/Windows/dev.svg?style=flat-square&logo=windows" alt="github-ci" />
    </a>
    <a href="https://github.com/xmake-io/xmake/actions?query=workflow%3ALinux">
      <img src="https://img.shields.io/github/workflow/status/xmake-io/xmake/Linux/dev.svg?style=flat-square&logo=linux" alt="github-ci" />
    </a>
    <a href="https://github.com/xmake-io/xmake/actions?query=workflow%3AmacOS">
      <img src="https://img.shields.io/github/workflow/status/xmake-io/xmake/macOS/dev.svg?style=flat-square&logo=apple" alt="github-ci" />
    </a>
    <a href="https://github.com/xmake-io/xmake/releases">
      <img src="https://img.shields.io/github/release/xmake-io/xmake.svg?style=flat-square" alt="Github All Releases" />
    </a>
  </div>
  <div>
    <a href="https://github.com/xmake-io/xmake/blob/master/LICENSE.md">
      <img src="https://img.shields.io/github/license/xmake-io/xmake.svg?colorB=f48041&style=flat-square" alt="license" />
    </a>
    <a href="https://www.reddit.com/r/xmake/">
      <img src="https://img.shields.io/badge/chat-on%20reddit-ff3f34.svg?style=flat-square" alt="Reddit" />
    </a>
    <a href="https://gitter.im/xmake-io/xmake?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge">
      <img src="https://img.shields.io/gitter/room/xmake-io/xmake.svg?style=flat-square&colorB=96c312" alt="Gitter" />
    </a>
    <a href="https://t.me/tbooxorg">
      <img src="https://img.shields.io/badge/chat-on%20telegram-blue.svg?style=flat-square" alt="Telegram" />
    </a>
    <a href="https://jq.qq.com/?_wv=1027&k=5hpwWFv">
      <img src="https://img.shields.io/badge/chat-on%20QQ-ff69b4.svg?style=flat-square" alt="QQ" />
    </a>
    <a href="https://aur.archlinux.org/packages/xmake">
      <img src="https://img.shields.io/aur/votes/xmake.svg?style=flat-square" alt="AUR votes" />
    </a>
    <a href="https://xmake.io/#/zh-cn/about/sponsor">
      <img src="https://img.shields.io/badge/donate-us-orange.svg?style=flat-square" alt="Donate" />
    </a>
  </div>

  <p>A cross-platform build utility based on Lua</p>
</div>

## é¡¹ç›®æ”¯æŒ

é€šè¿‡æˆä¸ºèµåŠ©è€…æ¥æ”¯æŒè¯¥é¡¹ç›®ã€‚æ‚¨çš„logoå°†æ˜¾ç¤ºåœ¨æ­¤å¤„ï¼Œå¹¶å¸¦æœ‰æŒ‡å‘æ‚¨ç½‘ç«™çš„é“¾æ¥ã€‚ğŸ™ [[æˆä¸ºèµåŠ©å•†](https://xmake.io/#/zh-cn/about/sponsor)]

<a href="https://opencollective.com/xmake#backers" target="_blank"><img src="https://opencollective.com/xmake/backers.svg?width=890"></a>

## ç®€ä»‹

xmake æ˜¯ä¸€ä¸ªåŸºäº Lua çš„è½»é‡çº§è·¨å¹³å°æ„å»ºå·¥å…·ï¼Œä½¿ç”¨ xmake.lua ç»´æŠ¤é¡¹ç›®æ„å»ºï¼Œç›¸æ¯” makefile/CMakeLists.txtï¼Œé…ç½®è¯­æ³•æ›´åŠ ç®€æ´ç›´è§‚ï¼Œå¯¹æ–°æ‰‹éå¸¸å‹å¥½ï¼ŒçŸ­æ—¶é—´å†…å°±èƒ½å¿«é€Ÿå…¥é—¨ï¼Œèƒ½å¤Ÿè®©ç”¨æˆ·æŠŠæ›´å¤šçš„ç²¾åŠ›é›†ä¸­åœ¨å®é™…çš„é¡¹ç›®å¼€å‘ä¸Šã€‚

è™½ç„¶ï¼Œç®€å•æ˜“ç”¨æ˜¯ xmake çš„ä¸€å¤§ç‰¹è‰²ï¼Œä½† xmake çš„åŠŸèƒ½ä¹Ÿæ˜¯éå¸¸å¼ºå¤§çš„ï¼Œæ—¢èƒ½å¤Ÿåƒ Make/Ninja é‚£æ ·å¯ä»¥ç›´æ¥ç¼–è¯‘é¡¹ç›®ï¼Œä¹Ÿå¯ä»¥åƒ CMake/Meson é‚£æ ·ç”Ÿæˆå·¥ç¨‹æ–‡ä»¶ï¼Œè¿˜æœ‰å†…ç½®çš„åŒ…ç®¡ç†ç³»ç»Ÿæ¥å¸®åŠ©ç”¨æˆ·è§£å†³ C/C++ä¾èµ–åº“çš„é›†æˆä½¿ç”¨é—®é¢˜ã€‚

ç›®å‰ï¼Œxmakeä¸»è¦ç”¨äºC/C++é¡¹ç›®çš„æ„å»ºï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿæ”¯æŒå…¶ä»–nativeè¯­è¨€çš„æ„å»ºï¼Œå¯ä»¥å®ç°è·ŸC/C++è¿›è¡Œæ··åˆç¼–è¯‘ï¼ŒåŒæ—¶ç¼–è¯‘é€Ÿåº¦ä¹Ÿæ˜¯éå¸¸çš„å¿«ï¼Œå¯ä»¥è·ŸNinjaæŒå¹³ã€‚

å¦‚æœä½ æƒ³è¦äº†è§£æ›´å¤šï¼Œè¯·å‚è€ƒï¼š[åœ¨çº¿æ–‡æ¡£](https://xmake.io/#/zh-cn/getting_started), [Github](https://github.com/xmake-io/xmake)ä»¥åŠ[Gitee](https://gitee.com/tboox/xmake)

![](https://xmake.io/assets/img/index/xmake-basic-render.gif)

## è¯¾ç¨‹

xmake å®˜æ–¹ä¹Ÿæ¨å‡ºäº†ä¸€äº›å…¥é—¨è¯¾ç¨‹ï¼Œå¸¦ä½ ä¸€æ­¥æ­¥å¿«é€Ÿä¸Šæ‰‹ xmakeï¼Œè¯¾ç¨‹åˆ—è¡¨å¦‚ä¸‹ï¼š

* [Xmake å¸¦ä½ è½»æ¾æ„å»º C/C++ é¡¹ç›®](https://xmake.io/#/zh-cn/about/course)

## å®‰è£…

#### ä½¿ç”¨curl

```bash
bash <(curl -fsSL https://xmake.io/shget.text)
```

#### ä½¿ç”¨wget

```bash
bash <(wget https://xmake.io/shget.text -O -)
```

#### ä½¿ç”¨powershell

```powershell
Invoke-Expression (Invoke-Webrequest 'https://xmake.io/psget.text' -UseBasicParsing).Content
```

## ç®€å•çš„å·¥ç¨‹æè¿°

<img src="https://xmake.io/assets/img/index/showcode1.png" width="340px" />

## åŒ…ä¾èµ–æè¿°

<img src="https://xmake.io/assets/img/index/add_require.png" width="600px" />

å®˜æ–¹çš„xmakeåŒ…ç®¡ç†ä»“åº“: [xmake-repo](https://github.com/xmake-io/xmake-repo)

## æ„å»ºå·¥ç¨‹

```bash
$ xmake
```

## è¿è¡Œç›®æ ‡

```bash
$ xmake run console
```

## è°ƒè¯•ç¨‹åº

```bash
$ xmake run -d console
```

## é…ç½®å¹³å°

```bash
$ xmake f -p [windows|linux|macosx|android|iphoneos ..] -a [x86|arm64 ..] -m [debug|release]
$ xmake
```

## å›¾å½¢åŒ–èœå•é…ç½®

```bash
$ xmake f --menu
```

<img src="https://xmake.io/assets/img/index/menuconf.png" width="650px" />

## è·Ÿninjaä¸€æ ·å¿«çš„æ„å»ºé€Ÿåº¦

æµ‹è¯•å·¥ç¨‹: [xmake-core](https://github.com/xmake-io/xmake/tree/master/core)

### å¤šä»»åŠ¡å¹¶è¡Œç¼–è¯‘æµ‹è¯•

| æ„å»ºç³»ç»Ÿ        | Termux (8core/-j12) | æ„å»ºç³»ç»Ÿ         | MacOS (8core/-j12) |
|-----            | ----                | ---              | ---                |
|xmake            | 24.890s             | xmake            | 12.264s            |
|ninja            | 25.682s             | ninja            | 11.327s            |
|cmake(gen+make)  | 5.416s+28.473s      | cmake(gen+make)  | 1.203s+14.030s     |
|cmake(gen+ninja) | 4.458s+24.842s      | cmake(gen+ninja) | 0.988s+11.644s     |

### å•ä»»åŠ¡ç¼–è¯‘æµ‹è¯•

| æ„å»ºç³»ç»Ÿ        | Termux (-j1)     | æ„å»ºç³»ç»Ÿ         | MacOS (-j1)    |
|-----            | ----             | ---              | ---            |
|xmake            | 1m57.707s        | xmake            | 39.937s        |
|ninja            | 1m52.845s        | ninja            | 38.995s        |
|cmake(gen+make)  | 5.416s+2m10.539s | cmake(gen+make)  | 1.203s+41.737s |
|cmake(gen+ninja) | 4.458s+1m54.868s | cmake(gen+ninja) | 0.988s+38.022s |


## åŒ…ä¾èµ–ç®¡ç†

### ä¸‹è½½å’Œç¼–è¯‘

<img src="https://xmake.io/assets/img/index/package_manage.png" width="650px" />

### æ¶æ„å’Œæµç¨‹

<img src="https://xmake.io/assets/img/index/package_arch.png" width="650px" />

## æ”¯æŒå¹³å°

* Windows (x86, x64)
* macOS (i386, x86_64)
* Linux (i386, x86_64, cross-toolchains ..)
* *BSD (i386, x86_64)
* Android (x86, x86_64, armeabi, armeabi-v7a, arm64-v8a)
* iOS (armv7, armv7s, arm64, i386, x86_64)
* WatchOS (armv7k, i386)
* MSYS (i386, x86_64)
* MinGW (i386, x86_64)
* Cygwin (i386, x86_64)
* Wasm (wasm32)
* Cross (cross-toolchains ..)

## æ”¯æŒå·¥å…·é“¾

```bash
$ xmake show -l toolchains
xcode         Xcode IDE
vs            VisualStudio IDE
yasm          The Yasm Modular Assembler
clang         A C language family frontend for LLVM
go            Go Programming Language Compiler
dlang         D Programming Language Compiler
gfortran      GNU Fortran Programming Language Compiler
zig           Zig Programming Language Compiler
sdcc          Small Device C Compiler
cuda          CUDA Toolkit
ndk           Android NDK
rust          Rust Programming Language Compiler
llvm          A collection of modular and reusable compiler and toolchain technologies
cross         Common cross compilation toolchain
nasm          NASM Assembler
gcc           GNU Compiler Collection
mingw         Minimalist GNU for Windows
gnu-rm        GNU Arm Embedded Toolchain
envs          Environment variables toolchain
fasm          Flat Assembler
tinyc         Tiny C Compiler
emcc          A toolchain for compiling to asm.js and WebAssembly
icc           Intel C/C++ Compiler
ifort         Intel Fortran Compiler
```

## æ”¯æŒè¯­è¨€

* C/C++
* Objc/Objc++
* Swift
* Assembly
* Golang
* Rust
* Dlang
* Fortran
* Cuda
* Zig (Experimental)

## å·¥ç¨‹ç±»å‹

* é™æ€åº“ç¨‹åº
* åŠ¨æ€åº“ç±»å‹
* æ§åˆ¶å°ç¨‹åº
* Cudaç¨‹åº
* Qtåº”ç”¨ç¨‹åº
* WDKé©±åŠ¨ç¨‹åº
* WinSDKåº”ç”¨ç¨‹åº
* MFCåº”ç”¨ç¨‹åº
* iOS/MacOSåº”ç”¨ç¨‹åº
* Frameworkå’ŒBundleç¨‹åºï¼ˆiOS/MacOSï¼‰

## æ›´å¤šä¾‹å­

#### Debug å’Œ Releaseæ¨¡å¼

```lua
add_rules("mode.debug", "mode.release")

target("console")
    set_kind("binary")
    add_files("src/*.c")
    if is_mode("debug") then
        add_defines("DEBUG")
    end
```

#### è‡ªå®šä¹‰è„šæœ¬

```lua
target("test")
    set_kind("binary")
    add_files("src/*.c")
    after_build(function (target)
        print("hello: %s", target:name())
        os.exec("echo %s", target:targetfile())
    end)
```

#### ä¾èµ–åŒ…è‡ªåŠ¨é›†æˆ

ä¸‹è½½å’Œä½¿ç”¨åœ¨[xmake-repo](https://github.com/xmake-io/xmake-repo)å’Œç¬¬ä¸‰æ–¹åŒ…ä»“åº“çš„ä¾èµ–åŒ…ï¼š

```lua
add_requires("tbox >1.6.1", "libuv master", "vcpkg::ffmpeg", "brew::pcre2/libpcre2-8")
add_requires("conan::openssl/1.1.1g", {alias = "openssl", optional = true, debug = true}) 
target("test")
    set_kind("binary")
    add_files("src/*.c")
    add_packages("tbox", "libuv", "vcpkg::ffmpeg", "brew::pcre2/libpcre2-8", "openssl")
```

#### Qt QuickApp åº”ç”¨ç¨‹åº

```lua
target("test")
    add_rules("qt.quickapp")
    add_files("src/*.cpp")
    add_files("src/qml.qrc")
```

#### Cuda ç¨‹åº

```lua
target("test")
    set_kind("binary")
    add_files("src/*.cu")
    add_cugencodes("native")
    add_cugencodes("compute_35")
```

#### WDK/UMDF é©±åŠ¨ç¨‹åº

```lua
target("echo")
    add_rules("wdk.driver", "wdk.env.umdf")
    add_files("driver/*.c") 
    add_files("driver/*.inx")
    add_includedirs("exe")

target("app")
    add_rules("wdk.binary", "wdk.env.umdf")
    add_files("exe/*.cpp")
```

æ›´å¤šWDKé©±åŠ¨ç¨‹åºä¾‹å­(umdf/kmdf/wdm)ï¼Œè§ï¼š[WDKå·¥ç¨‹ä¾‹å­](https://xmake.io/#/zh-cn/guide/project_examples?id=wdk%e9%a9%b1%e5%8a%a8%e7%a8%8b%e5%ba%8f)

#### iOS/MacOS åº”ç”¨ç¨‹åº

```lua
target("test")
    add_rules("xcode.application")
    add_files("src/*.m", "src/**.storyboard", "src/*.xcassets")
    add_files("src/Info.plist")
```

#### Framework å’Œ Bundle ç¨‹åºï¼ˆiOS/MacOSï¼‰

```lua
target("test")
    add_rules("xcode.framework") -- æˆ–è€… xcode.bundle
    add_files("src/*.m")
    add_files("src/Info.plist")
```

#### OpenMP ç¨‹åº

```lua
add_requires("libomp", {optional = true})
target("loop")
    set_kind("binary")
    add_files("src/*.cpp")
    add_rules("c++.openmp")
    add_packages("libomp")
```

## æ’ä»¶

#### ç”ŸæˆIDEå·¥ç¨‹æ–‡ä»¶æ’ä»¶ï¼ˆmakefile, vs2002 - vs2019, ...ï¼‰

```bash
$ xmake project -k vsxmake -m "debug;release" # æ–°ç‰ˆvså·¥ç¨‹ç”Ÿæˆæ’ä»¶ï¼ˆæ¨èï¼‰
$ xmake project -k vs -m "debug;release"
$ xmake project -k cmake
$ xmake project -k ninja
$ xmake project -k compile_commands
```

#### åŠ è½½è‡ªå®šä¹‰luaè„šæœ¬æ’ä»¶

```bash
$ xmake l ./test.lua
$ xmake l -c "print('hello xmake!')"
$ xmake l lib.detect.find_tool gcc
$ xmake l
> print("hello xmake!")
> {1, 2, 3}
< { 
    1,
    2,
    3 
  }
```

æ›´å¤šå†…ç½®æ’ä»¶è§ç›¸å…³æ–‡æ¡£ï¼š[å†…ç½®æ’ä»¶æ–‡æ¡£](https://xmake.io/#/zh-cn/plugin/builtin_plugins)

å…¶ä»–æ‰©å±•æ’ä»¶ï¼Œè¯·åˆ°æ’ä»¶ä»“åº“è¿›è¡Œä¸‹è½½å®‰è£…: [xmake-plugins](https://github.com/xmake-io/xmake-plugins).

## IDEå’Œç¼–è¾‘å™¨æ’ä»¶

* [xmake-vscode](https://github.com/xmake-io/xmake-vscode)

<img src="https://raw.githubusercontent.com/xmake-io/xmake-vscode/master/res/problem.gif" width="650px" />

* [xmake-sublime](https://github.com/xmake-io/xmake-sublime)

<img src="https://raw.githubusercontent.com/xmake-io/xmake-sublime/master/res/problem.gif" width="650px" />

* [xmake-idea](https://github.com/xmake-io/xmake-idea)

<img src="https://raw.githubusercontent.com/xmake-io/xmake-idea/master/res/problem.gif" width="650px" />

* [xmake.vim](https://github.com/luzhlon/xmake.vim) (third-party, thanks [@luzhlon](https://github.com/luzhlon))

### XMake Gradleæ’ä»¶ (JNI)

æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨Gradleä¸­ä½¿ç”¨[xmake-gradle](https://github.com/xmake-io/xmake-gradle)æ’ä»¶æ¥é›†æˆç¼–è¯‘JNIåº“

```
plugins {
  id 'org.tboox.gradle-xmake-plugin' version '1.0.6'
}

android {
    externalNativeBuild {
        xmake {
            path "jni/xmake.lua"
        }
    }
}
```

å½“`gradle-xmake-plugin`æ’ä»¶è¢«åº”ç”¨ç”Ÿæ•ˆåï¼Œ`xmakeBuild`ä»»åŠ¡ä¼šè‡ªåŠ¨æ³¨å…¥åˆ°ç°æœ‰çš„`assemble`ä»»åŠ¡ä¸­å»ï¼Œè‡ªåŠ¨æ‰§è¡Œjniåº“ç¼–è¯‘å’Œé›†æˆã€‚

```console
$ ./gradlew app:assembleDebug
> Task :nativelib:xmakeConfigureForArm64
> Task :nativelib:xmakeBuildForArm64
>> xmake build
[ 50%]: ccache compiling.debug nativelib.cc
[ 75%]: linking.debug libnativelib.so
[100%]: build ok!
>> install artifacts to /Users/ruki/projects/personal/xmake-gradle/nativelib/libs/arm64-v8a
> Task :nativelib:xmakeConfigureForArmv7
> Task :nativelib:xmakeBuildForArmv7
>> xmake build
[ 50%]: ccache compiling.debug nativelib.cc
[ 75%]: linking.debug libnativelib.so
[100%]: build ok!
>> install artifacts to /Users/ruki/projects/personal/xmake-gradle/nativelib/libs/armeabi-v7a
> Task :nativelib:preBuild
> Task :nativelib:assemble
> Task :app:assembleDebug
```

## æŠ€æœ¯æ”¯æŒ

æˆ‘ä»¬ä¹Ÿæä¾›ä»˜è´¹çš„æŠ€æœ¯æ”¯æŒæ¥ä¸ºå¸®åŠ©ç”¨æˆ·å¿«é€Ÿè§£å†³ç›¸å…³é—®é¢˜ï¼Œå…·ä½“è¯¦æƒ…è¯·ç‚¹å‡»ä¸‹é¢çš„å›¾ç‰‡é“¾æ¥ï¼š

<a href="https://xscode.com/waruqi/xmake">
<img src="https://tboox.org/assets/img/xmake-xscode.png" width="650px" />
</a>

æˆ–è€…ä½ ä¹Ÿå¯ä»¥è€ƒè™‘èµåŠ©æˆ‘ä»¬ä¹Ÿè·å–æŠ€æœ¯æ”¯æŒæœåŠ¡ï¼Œ[[æˆä¸ºèµåŠ©å•†](https://xmake.io/#/zh-cn/about/sponsor)]

## é¡¹ç›®ä¾‹å­

ä¸€äº›ä½¿ç”¨xmakeçš„é¡¹ç›®ï¼š

* [tbox](https://github.com/tboox/tbox)
* [gbox](https://github.com/tboox/gbox)
* [vm86](https://github.com/tboox/vm86)
* [æ›´å¤š](https://github.com/xmake-io/awesome-xmake)

## è”ç³»æ–¹å¼

* é‚®ç®±ï¼š[waruqi@gmail.com](mailto:waruqi@gmail.com)
* ä¸»é¡µï¼š[xmake.io](https://xmake.io/#/zh-cn/)
* ç¤¾åŒºï¼š[Redditè®ºå›](https://www.reddit.com/r/xmake/)
* èŠå¤©ï¼š[Telegramç¾¤ç»„](https://t.me/tbooxorg), [GitterèŠå¤©å®¤](https://gitter.im/xmake-io/xmake?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)
* æºç ï¼š[Github](https://github.com/xmake-io/xmake), [Gitee](https://gitee.com/tboox/xmake)
* QQç¾¤ï¼š343118190(æŠ€æœ¯æ”¯æŒ), 662147501
* å¾®ä¿¡å…¬ä¼—å·ï¼štboox-os
 
## æ„Ÿè°¢

æ„Ÿè°¢æ‰€æœ‰å¯¹xmakeæœ‰æ‰€[è´¡çŒ®](CONTRIBUTING.md)çš„äºº:
<a href="https://github.com/xmake-io/xmake/graphs/contributors"><img src="https://opencollective.com/xmake/contributors.svg?width=890&button=false" /></a>

* [TitanSnow](https://github.com/TitanSnow): æä¾›xmake [logo](https://github.com/TitanSnow/ts-xmake-logo) å’Œå®‰è£…è„šæœ¬
* [uael](https://github.com/uael): æä¾›è¯­ä¹‰ç‰ˆæœ¬è·¨å¹³å°cåº“ [sv](https://github.com/uael/sv)
* [OpportunityLiu](https://github.com/OpportunityLiu): æ”¹è¿›cudaæ„å»º, testsæ¡†æ¶å’Œci

